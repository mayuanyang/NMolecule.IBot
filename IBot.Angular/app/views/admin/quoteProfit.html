<div class="panel panel-default">
    <div class="panel-heading">{{model.quoteCategoryName}}</div>
    <div class="panel-body">
        <form name="materialForm">
            <table class="table">
                <thead>
                    <tr>
                        <th>简短描述</th>
                        <th>金额范围</th>
                        <th>利润百分率%</th>
                        <th>固定收费</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody ng-repeat="m in model.profits">
                    <tr ng-if="!m.isEditing && !m.shouldBeDeleted">
                        <td>
                            <span>{{m.name}}</span>
                        </td>
                        <td class="col-md-2">
                            <span>{{m.minimumCost}}</span>
                            <span ng-if="m.nextTierMinimumCost > 0">~{{m.nextTierMinimumCost}}</span>
                            <span ng-if="m.nextTierMinimumCost == 0">~无限大</span>

                        </td>
                        <td>
                            <span>{{m.percentage}}</span>
                        </td>
                        <td>
                            <span>{{m.fixedCost}}</span>

                        </td>
                        <td class="col-md-2">
                            <div class="btn-group pull-right" role="group" aria-label="...">

                                <button ng-if="!m.isEditing" class="btn btn-sm btn-primary" ng-click="m.isEditing = true;">修改</button>
                                <button ng-if="m.isEditing" class="btn btn-sm btn-primary" ng-click="m.isEditing = false;">取消</button>
                                <button ng-if="!m.shouldBeDeleted" class="btn btn-danger btn-sm" ng-click="model.remove(part, $index)">删除</button>
                            </div>
                        </td>
                    </tr>
                    <tr ng-if="m.isEditing && !m.shouldBeDeleted">
                        <td>
                            <div class="form-group input-group" ng-if="m.isEditing">
                                <span class="input-group-addon" id="spName">简短描述</span>
                                <input type="text" class="form-control" aria-describedby="spName" placeholder="第一阶段" ng-model="m.name" required />
                            </div>
                        </td>
                        <td>
                            <div class="form-group input-group" ng-if="m.isEditing">
                                <span class="input-group-addon" id="spMinimum">起始值</span>
                                <input type="number" class="form-control" step="100" aria-describedby="spMinimum" placeholder="第一阶段" ng-model="m.minimumCost" required />

                            </div>
                        </td>
                        <td>
                            <div class="form-group input-group" ng-if="m.isEditing">
                                <span class="input-group-addon" id="spPercent">利润百分率%</span>
                                <input type="number" class="form-control" aria-describedby="spPercent" step="0.1" placeholder="10%" ng-model="m.percentage" required />
                            </div>
                        </td>
                        <td>
                            <div class="form-group input-group" ng-if="m.isEditing">
                                <span class="input-group-addon" id="spFixed">固定收费</span>
                                <input type="number" class="form-control" aria-describedby="spFixed" step="0.1" placeholder="100" ng-model="m.fixedCost" required />
                            </div>
                        </td>

                        <td class="col-md-2">
                            <div class="btn-group pull-right" role="group" aria-label="...">

                                <button ng-if="!m.isEditing" class="btn btn-sm btn-primary" ng-click="m.isEditing = true;">修改</button>
                                <button ng-if="m.isEditing" class="btn btn-sm btn-primary" ng-click="m.isEditing = false;">取消</button>
                                <button ng-if="!m.shouldBeDeleted" class="btn btn-danger btn-sm" ng-click="model.remove(m, $index)">删除</button>
                            </div>
                        </td>
                    </tr>
                </tbody>
                <tr>
                    <td colspan="5">
                        <div class="btn-group pull-right" role="group" aria-label="...">
                            <button class="btn btn-primary" ng-click="model.add(part)">
                                添加
                            </button>
                            <button class="btn btn-success" ng-click="model.save()">
                                保存
                            </button>
                        </div>

                    </td>
                </tr>
            </table>
        </form>
    </div>
</div>
