<div ng-if="model.showPage">
    <h3>{{model.quoteCategoryName}}</h3>
    <form class="form" name="genericForm">
        <div class="panel panel-default" ng-repeat="qcPart in model.bindingInfo.parts">
            <div class="panel-heading">{{qcPart.name}}</div>
            <div class="panel-body" ng-if="qcPart.name !== '内页'">
                <div class='col-sm-4'>
                    <div class="form-group input-group">
                        <span class="input-group-addon" id="spSize">成品尺寸</span>
                        <select id="inputSize" class="form-control" aria-describedby="spSize" ng-options="item.label for item in model.standardSizes track by item.id" ng-model="model.defaultSize"></select>

                    </div>

                    <div class="form-group input-group">

                        <span class="input-group-addon" id="spSide">单双面</span>
                        <select id="inputDoubleSide" class="form-control" aria-describedby="spSide" ng-options="item.label for item in model.doubleSides track by item.id" ng-model="model.defaultSide"></select>

                    </div>
                </div>
                <div class='col-sm-4'>
                    <div class="form-group input-group">

                        <span class="input-group-addon" id="spQuantity">印刷数量</span>
                        <input id="inputQuantity" type="number" step="100" class="form-control" aria-describedby="spQuantity" ng-model="model.customerWantedQuantity"/>

                    </div>
                    <div class="form-group input-group">
                        <span class="input-group-addon" id="spMaterial">材料</span>
                        <select id="inputMaterial" class="form-control" aria-describedby="spMaterial" ng-options="item.name for item in qcPart.materialCategories track by item.name" ng-model="qcPart.defaultMaterialCategory"></select>

                    </div>

                </div>
                <div class='col-sm-4'>
                    <div class="form-group input-group">
                        <span class="input-group-addon" id="spColor">颜色</span>
                        <select id="inputColor" class="form-control" aria-describedby="spColor" ng-options="item.name for item in qcPart.colorItems track by item.name" ng-model="qcPart.defaultColor"></select>

                    </div>
                    <div class="form-group input-group">
                        <span class="input-group-addon" id="spGramWeight">克重</span>
                        <select id="inputGramWeight" class="form-control" aria-describedby="spGramWeight" ng-options="item.gramWeight for item in qcPart.materials track by item.gramWeight" ng-model="qcPart.defaultGramWeight"></select>
                    </div>
                </div>
                <div ng-repeat="group in qcPart.technicsGroups" class="col-sm-12">
                    <div class="form-group input-group" ng-if="group.consolidated">
                        <span class="input-group-addon" id="sp{{group.id}}">{{group.groupName}}</span>
                        <select id="input{{group.groupId}}" class="form-control" aria-describedby="sp{{group.id}}" ng-options="item.name for item in group.technicsItems" ng-init="(group.requireSelection) ? model.groupSelectedTechnicses[$index]=group.technicsItems[0] : ''" ng-model="model.groupSelectedTechnicses[$index]">
                            <option ng-if="!group.requireSelection"></option>

                        </select>
                    </div>

                    <div ng-if="!group.consolidated">
                        <div class="panel panel-default">
                            <div class="panel-heading">{{group.groupName}}</div>
                            <div class="panel-body">
                                <div ng-repeat="technics in group.technicsItems" ng-if="$index % 4 == 0">
                                    <div class="col-xs-3">
                                        <span><input type="checkbox" ng-click="model.toggleSelection(group.technicsItems[$index])" value="{{group.technicsItems[$index].name}}">{{group.technicsItems[$index].name}}</span>
                                    </div>
                                    <div class="col-xs-3" ng-if="group.technicsItems.length > ($index + 1)">
                                        <span><input type="checkbox" ng-click="model.toggleSelection(group.technicsItems[$index + 1])" value="{{group.technicsItems[$index + 1].name}}">{{group.technicsItems[$index + 1].name}}</span>
                                    </div>
                                    <div class="col-xs-3" ng-if="group.technicsItems.length > ($index + 2)">
                                        <span><input type="checkbox" ng-click="model.toggleSelection(group.technicsItems[$index + 2])" value="{{group.technicsItems[$index + 2].name}}">{{group.technicsItems[$index + 2].name}}</span>
                                    </div>
                                    <div class="col-xs-3" ng-if="group.technicsItems.length > ($index + 3)">
                                        <span><input type="checkbox" ng-click="model.toggleSelection(group.technicsItems[$index + 3])" value="{{group.technicsItems[$index + 3].name}}">{{group.technicsItems[$index + 3].name}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div class="panel-body" ng-if="qcPart.name == '内页'">
                <div class='col-sm-4'>
                    <div class="form-group input-group">
                        <span class="input-group-addon" id="spNumOfPage">内页P数</span>
                        <input id="inputNumOfPage" type="number" step="4" class="form-control" aria-describedby="spNumOfPage" ng-model="model.defaultNumOfPages"/>

                    </div>
                    <div class="form-group input-group">
                        <span class="input-group-addon" id="spInternalGramWeight">克重</span>
                        <select id="inputInternalGramWeight" class="form-control" aria-describedby="spInternalGramWeight" ng-options="item.gramWeight for item in qcPart.materials track by item.gramWeight" ng-model="qcPart.defaultGramWeight"></select>
                    </div>


                </div>
                <div class='col-sm-4'>
                    <div class="form-group input-group">
                        <span class="input-group-addon" id="spInternalMaterial">材料</span>
                        <select id="inputInternalMaterial" class="form-control" aria-describedby="spInternalMaterial" ng-options="item.name for item in qcPart.materialCategories track by item.name" ng-model="qcPart.defaultMaterialCategory"></select>

                    </div>
                </div>
                <div class='col-sm-4'>
                    <div class="form-group input-group">
                        <span class="input-group-addon" id="spInternalColor">颜色</span>
                        <select id="inputInternalColor" class="form-control" aria-describedby="spInternalColor" ng-options="item.name for item in qcPart.colorItems track by item.name" ng-model="qcPart.defaultColor"></select>

                    </div>

                </div>
                <div ng-repeat="group in qcPart.technicsGroups" class="col-sm-12">
                    <div class="form-group input-group" ng-if="group.consolidated">
                        <span class="input-group-addon" id="sp{{group.id}}">{{group.groupName}}</span>
                        <select id="input{{group.groupId}}" class="form-control" aria-describedby="sp{{group.id}}" ng-options="item.name for item in group.technicsItems" ng-model="model.groupSelectedTechnicses[$index]">
                            <option ng-if="!group.requireSelection"></option>

                        </select>
                    </div>

                    <div ng-if="!group.consolidated">
                        <div class="panel panel-default">
                            <div class="panel-heading">{{group.groupName}}</div>
                            <div class="panel-body">
                                <div ng-repeat="technics in group.technicsItems" ng-if="$index % 4 == 0">
                                    <div class="col-xs-3">
                                        <span><input type="checkbox" ng-click="model.toggleSelection(group.technicsItems[$index])" value="{{group.technicsItems[$index].name}}">{{group.technicsItems[$index].name}}</span>
                                    </div>
                                    <div class="col-xs-3" ng-if="group.technicsItems.length > ($index + 1)">
                                        <span><input type="checkbox" ng-click="model.toggleSelection(group.technicsItems[$index + 1])" value="{{group.technicsItems[$index + 1].name}}">{{group.technicsItems[$index + 1].name}}</span>
                                    </div>
                                    <div class="col-xs-3" ng-if="group.technicsItems.length > ($index + 2)">
                                        <span><input type="checkbox" ng-click="model.toggleSelection(group.technicsItems[$index + 2])" value="{{group.technicsItems[$index + 2].name}}">{{group.technicsItems[$index + 2].name}}</span>
                                    </div>
                                    <div class="col-xs-3" ng-if="group.technicsItems.length > ($index + 3)">
                                        <span><input type="checkbox" ng-click="model.toggleSelection(group.technicsItems[$index + 3])" value="{{group.technicsItems[$index + 3].name}}">{{group.technicsItems[$index + 3].name}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group">
            <button class="btn btn-primary btn-block" ng-click="model.getQuotationResult()"
                    ng-disabled="genericForm.$invalid">
                &nbsp;报价
            </button>

        </div>
    </form>

    <div class="form" id="divResult">
        <div ng-if="model.hasResult" class="panel panel-success">
            <div class="panel-heading">报价结果</div>
            <table class="table table-striped">
                <thead>
                <tr>
                    <th>数量</th>
                    <th>单价(元)</th>
                    <th>总价(元)</th>
                    <th></th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="quote in model.quoteResults" ng-click="quote.selected = !quote.selected" class="expandable">

                    <td>{{quote.quantity}}</td>
                    <td>{{quote.unitPrice}}</td>
                    <td>{{quote.total}}</td>
                    <td><button class="btn btn-primary" ng-click="model.quoteResultSelected(quote)">&nbsp;查看</button></td>
                    <td colspan="1" ng-if="$index==0" rowspan="5">
                        <div class="panel panel-primary">
                            <div class="panel-heading">联系方式</div>
                            <div class="panel-body">
                                <span class="glyphicon glyphicon-user"></span>  联系人
                                <p>{{model.contactInfo.contactPerson}}</p>
                                <span class="glyphicon glyphicon-phone-alt"></span>  联系电话
                                <p>{{model.contactInfo.contactNumber}}</p>
                                <span class="glyphicon glyphicon-globe"></span>  地址
                                <p>{{model.contactInfo.province}}{{model.contactInfo.city}}{{model.contactInfo.suburb}}{{model.contactInfo.address}}</p>
                            </div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div id="divPinbanInfo">
        <pinban-info selected-result="model.selectedResult" ng-if="model.selectedResult !== null"></pinban-info>
    </div>

</div>
